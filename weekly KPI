SELECT count(distinct email),
avg(nitems),
count(distinct order_number),
sum(subtotal) 
FROM `transactions` 
WHERE postdate between "2016-07-29" and "2016-08-04" 
and email in 
(select email from transactions where postdate<"2016-07-29") 
and currency like '%US'
and store_id like 'dss'

SElect count(distinct email), 
a (nitems), 
count(distinct order_number), 
sum(subtotal)
From 'transactions' 
Where postdate between '2016-07-29' and '2016-08-04'
and email in 
( select email from transactions where postdate < '2016-07-29' )
and currenccy like '%CA' 
and store id like 'dss'
